(()=>{var e={};e.id=565,e.ids=[565],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},1265:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>d}),t(4133),t(6700),t(5866);var i=t(3191),r=t(8716),a=t(7922),n=t.n(a),l=t(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4133)),"D:\\Sneakerdaily\\Client\\app\\cart\\page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,6700)),"D:\\Sneakerdaily\\Client\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["D:\\Sneakerdaily\\Client\\app\\cart\\page.js"],x="/cart/page",h={require:t,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},194:(e,s,t)=>{Promise.resolve().then(t.bind(t,8414))},8414:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var i=t(326),r=t(1313),a=t(7066),n=t(7577),l=t(639),c=t(6226),d=t(2391),o=t(8439),x=t.n(o);let h=({cart:e})=>{let[s,t]=(0,n.useState)(e||{items:[]}),[r,l]=(0,n.useState)(e?e.totalPrice:0),[o]=(0,n.useState)(0),{toast:x}=(0,d.pm)();(0,n.useEffect)(()=>{e&&(t(e),l(e.totalPrice))},[e]);let h=(e,s)=>e.length<=s?e:e.slice(0,s)+"...",m=e=>{l(e.reduce((e,s)=>e+s.productId.price*s.quantity,0))},u=async e=>{try{let i=s.items.map(s=>s._id===e._id?{...s,quantity:s.quantity+1}:s);if(t(e=>({...e,items:i})),m(i),!(await fetch(`${a.Z.NEXT_PUBLIC_API_ENDPOINT}/cart/increaseQuantity`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s.userId,productId:e.productId._id,color:e.color,size:e.size})})).ok)throw Error("Failed to increase quantity.")}catch(e){console.error("Failed to increase quantity:",e)}},p=async e=>{try{if(e.quantity>1){let i=s.items.map(s=>s._id===e._id?{...s,quantity:s.quantity-1}:s);if(t(e=>({...e,items:i})),m(i),!(await fetch("/api/decreaseQuantity",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s.userId,productId:e.productId._id,color:e.color,size:e.size})})).ok)throw Error("Failed to decrease quantity.")}}catch(e){console.error("Failed to decrease quantity:",e)}},g=()=>{x({title:"Successful",description:"Đặt h\xe0ng th\xe0nh c\xf4ng",status:"Success"})},j=async e=>{try{let i=s.items.filter(s=>s._id!==e._id);if(t(e=>({...e,items:i})),m(i),!(await fetch(`${a.Z.NEXT_PUBLIC_API_ENDPOINT}/cart/removeFromCart`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s.userId,productId:e.productId._id,color:e.color,size:e.size})})).ok)throw Error("Failed to remove item from cart.")}catch(e){console.error("Failed to remove item from cart:",e)}};return(0,i.jsxs)("div",{className:"mt-5 ",children:[(0,i.jsxs)("div",{className:"hidden lg:grid grid-cols-12 gap-4 p-5",children:[i.jsx("div",{className:"col-span-5",children:i.jsx("p",{children:"Sản phẩm"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("p",{children:"Đơn gi\xe1"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("p",{children:"Số lượng"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("p",{children:"Số tiền"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("p",{children:"Thao t\xe1c"})})]}),s&&s.items.length>0?(0,i.jsxs)("div",{className:"py-2",children:[s.items.map(e=>(0,i.jsxs)("div",{className:"flex flex-col gap-4 shadow-lg px-2 py-4 lg:grid lg:grid-cols-12",children:[(0,i.jsxs)("div",{className:"flex items-center lg:col-span-5",children:[i.jsx("div",{className:"col-span-4",children:i.jsx(c.default,{src:e.productId.image[0],alt:e.productId.name,objectFit:"cover",width:128,height:128})}),(0,i.jsxs)("div",{className:"ml-2",children:[i.jsx("p",{className:"text-sm font-medium",children:h(`${e.productId.name} - ${e.productId.attribute}`,70)}),(0,i.jsxs)("div",{className:"flex flex-row items-center mt-2 w-full",children:[(0,i.jsxs)("p",{className:"text-gray-600 text-sm",children:["M\xe0u sắc: ",e.color]}),(0,i.jsxs)("p",{className:"text-gray-600 ml-2 text-sm",children:["K\xedch cỡ: ",e.size]})]})]})]}),i.jsx("div",{className:" w-54 mt-2 lg:col-span-2",children:(0,i.jsxs)("p",{className:"text-gray-600",children:[e.productId.price.toLocaleString()," VND"]})}),(0,i.jsxs)("div",{className:" flex lg:col-span-2 mt-2",children:[i.jsx("button",{onClick:()=>p(e),className:"bg-gray-200 text-gray-700 w-8 h-8 rounded-l focus:outline-none",children:"-"}),i.jsx("p",{className:"text-gray-600 mx-3 my-1",children:e.quantity}),i.jsx("button",{onClick:()=>u(e),className:"bg-gray-200 text-gray-700 w-8 h-8 rounded-r focus:outline-none",children:"+"})]}),i.jsx("div",{className:" mt-2 lg:col-span-2",children:(0,i.jsxs)("p",{className:"text-lg text-red-500 font-bold",children:[(e.productId.price*e.quantity).toLocaleString()," VND"]})}),i.jsx("div",{className:"",children:i.jsx("button",{onClick:()=>j(e),className:"bg-red-500 text-white px-3 py-1 rounded m-2",children:"X\xf3a"})})]},e._id)),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsxs)("div",{className:"my-2",children:[i.jsx("label",{className:"block",children:"M\xe3 Coupon:"}),(0,i.jsxs)("select",{className:"border border-gray-300 p-2",children:[i.jsx("option",{children:"--Chọn--"}),i.jsx("option",{children:"Sử dụng điểm (Điểm của bạn: 00)"})]})]}),(0,i.jsxs)("div",{className:"flex justify-between my-2",children:[i.jsx("span",{children:"Tổng tiền h\xe0ng"}),(0,i.jsxs)("span",{children:[r.toLocaleString()," đ"]})]}),(0,i.jsxs)("div",{className:"flex justify-between my-2",children:[i.jsx("span",{children:"Giảm gi\xe1 sản phẩm"}),i.jsx("span",{children:"-0 đ"})]}),(0,i.jsxs)("div",{className:"flex justify-between my-2",children:[i.jsx("span",{children:"Giảm gi\xe1 coupon"}),(0,i.jsxs)("span",{children:["- ",o.toLocaleString()," đ"]})]}),(0,i.jsxs)("div",{className:"flex justify-between my-2",children:[i.jsx("span",{children:"Ph\xed vận chuyển"}),(0,i.jsxs)("span",{children:[0..toLocaleString()," đ"]})]}),(0,i.jsxs)("div",{className:"flex justify-between my-2 font-semibold",children:[i.jsx("span",{children:"TỔNG"}),(0,i.jsxs)("span",{children:[(r-o+0).toLocaleString()," đ"]})]}),(0,i.jsxs)("div",{className:"flex flex-row mt-4",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-xl font-semibold",children:"TH\xd4NG TIN VẬN CHUYỂN"}),i.jsx("button",{className:"text-blue-500 underline",children:"Thay đổi th\xf4ng tin nhận h\xe0ng"}),(0,i.jsxs)("div",{className:"mt-2",children:[i.jsx("p",{children:"Người nhận: Trần Ngọc T\xfa"}),i.jsx("p",{children:"Điện thoại: "}),i.jsx("p",{children:"Địa chỉ: "})]})]}),i.jsx("button",{onClick:()=>g(),className:"bg-red-500 w-44 text-white px-4 py-2 rounded-md hover:bg-red-600 transition duration-300 ease-in-out h-10 ml-auto self-end",children:"Đặt h\xe0ng"})]})]})]}):i.jsx("div",{className:"py-4 px-36 text-center",children:i.jsx("p",{className:"text-xl font-semibold mb-64",children:"Giỏ h\xe0ng của bạn đang trống"})})]})};h.propTypes={cart:x().shape({userId:x().string,items:x().arrayOf(x().shape({_id:x().string.isRequired,productId:x().shape({_id:x().string.isRequired,name:x().string.isRequired,attribute:x().string.isRequired,image:x().arrayOf(x().string).isRequired,price:x().number.isRequired}).isRequired,color:x().string.isRequired,size:x().string.isRequired,quantity:x().number.isRequired})),totalPrice:x().number})};var m=t(143);function u(){let{user:e}=(0,l.Z)(),[s,t]=(0,n.useState)();return console.log(s),(0,i.jsxs)("div",{children:[i.jsx(r.default,{}),(0,i.jsxs)("div",{className:" px-5 pt-24 lg:mx-36",children:[i.jsx("text",{children:"Trang chủ | Giỏ h\xe0ng"}),i.jsx(h,{cart:s}),i.jsx(m.Z,{})]})]})}},143:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});var i=t(326);t(7577);let r=()=>i.jsx("footer",{className:"bg-black text-white py-6 px-4 mt-20",children:(0,i.jsxs)("div",{className:"max-w-3xl mx-auto",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"HỆ THỐNG CỬA H\xc0NG"}),(0,i.jsxs)("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-base font-semibold mb-2",children:"KHU VỰC TPHCM"}),(0,i.jsxs)("ul",{className:"list-disc list-inside",children:[(0,i.jsxs)("li",{children:["414-416 Nguyễn Tr\xe3i, P.8, Q5."," ",i.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition duration-300 ease-in-out",children:"Xem bản đồ"})]}),(0,i.jsxs)("li",{children:["96 Nguyễn Tr\xe3i, P3, Q5."," ",i.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition duration-300 ease-in-out",children:"Xem bản đồ"})]}),(0,i.jsxs)("li",{children:["214 Nguyễn Tr\xe3i, P.Nguyễn Cư Trinh, Q1."," ",i.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition duration-300 ease-in-out",children:"Xem bản đồ"})]}),(0,i.jsxs)("li",{children:["126 Hậu Giang, P.6, Q6."," ",i.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition duration-300 ease-in-out",children:"Xem bản đồ"})]}),(0,i.jsxs)("li",{children:["124 Nguyễn Thị Thập, P.B\xecnh Thuận, Q7."," ",i.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition duration-300 ease-in-out",children:"Xem bản đồ"})]})]})]}),i.jsx("div",{className:"flex justify-center mt-6",children:i.jsx("div",{className:"w-full border-t border-gray-300"})}),(0,i.jsxs)("div",{className:"flex justify-between items-center mt-6",children:[i.jsx("div",{className:"text-sm text-gray-300",children:"\xa9 2024 Shop Gi\xe0y MWC. All rights reserved."}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[i.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition duration-300 ease-in-out",children:"Privacy Policy"}),i.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition duration-300 ease-in-out",children:"Terms of Service"})]})]})]})})},4133:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});var i=t(8570);let r=(0,i.createProxy)(String.raw`D:\Sneakerdaily\Client\app\cart\page.js`),{__esModule:a,$$typeof:n}=r;r.default;let l=(0,i.createProxy)(String.raw`D:\Sneakerdaily\Client\app\cart\page.js#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),i=s.X(0,[948,615,134,621,908,496,909,478,313],()=>t(1265));module.exports=i})();