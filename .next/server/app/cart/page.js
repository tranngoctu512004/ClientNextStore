(()=>{var e={};e.id=565,e.ids=[565],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},1265:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>h,pages:()=>o,routeModule:()=>u,tree:()=>d}),s(4133),s(6700),s(5866);var r=s(3191),i=s(8716),a=s(7922),n=s.n(a),l=s(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let d=["",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4133)),"D:\\Sneakerdaily\\Client\\app\\cart\\page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,6700)),"D:\\Sneakerdaily\\Client\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["D:\\Sneakerdaily\\Client\\app\\cart\\page.js"],h="/cart/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},194:(e,t,s)=>{Promise.resolve().then(s.bind(s,8414))},8414:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(326),i=s(1313),a=s(7066),n=s(7577),l=s(639),c=s(6226),d=s(2391),o=s(8439),h=s.n(o);let x=({cart:e})=>{let[t,s]=(0,n.useState)(e||{items:[]}),[i,l]=(0,n.useState)(e?e.totalPrice:0),[o]=(0,n.useState)(0),{toast:h}=(0,d.pm)();(0,n.useEffect)(()=>{e&&(s(e),l(e.totalPrice))},[e]);let x=(e,t)=>e.length<=t?e:e.slice(0,t)+"...",u=e=>{l(e.reduce((e,t)=>e+t.productId.price*t.quantity,0))},m=async e=>{try{let r=t.items.map(t=>t._id===e._id?{...t,quantity:t.quantity+1}:t);if(s(e=>({...e,items:r})),u(r),!(await fetch(`${a.Z.NEXT_PUBLIC_API_ENDPOINT}/cart/increaseQuantity`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.userId,productId:e.productId._id,color:e.color,size:e.size})})).ok)throw Error("Failed to increase quantity.")}catch(e){console.error("Failed to increase quantity:",e)}},p=async e=>{try{if(e.quantity>1){let r=t.items.map(t=>t._id===e._id?{...t,quantity:t.quantity-1}:t);if(s(e=>({...e,items:r})),u(r),!(await fetch("/api/decreaseQuantity",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.userId,productId:e.productId._id,color:e.color,size:e.size})})).ok)throw Error("Failed to decrease quantity.")}}catch(e){console.error("Failed to decrease quantity:",e)}},j=()=>{h({title:"Successful",description:"Đặt h\xe0ng th\xe0nh c\xf4ng",status:"Success"})},g=async e=>{try{let r=t.items.filter(t=>t._id!==e._id);if(s(e=>({...e,items:r})),u(r),!(await fetch(`${a.Z.NEXT_PUBLIC_API_ENDPOINT}/cart/removeFromCart`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.userId,productId:e.productId._id,color:e.color,size:e.size})})).ok)throw Error("Failed to remove item from cart.")}catch(e){console.error("Failed to remove item from cart:",e)}};return(0,r.jsxs)("div",{className:"mt-5",children:[(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-5",children:[r.jsx("div",{className:"col-span-5",children:r.jsx("p",{children:"Sản phẩm"})}),r.jsx("div",{className:"col-span-2",children:r.jsx("p",{children:"Đơn gi\xe1"})}),r.jsx("div",{className:"col-span-1",children:r.jsx("p",{children:"Số lượng"})}),r.jsx("div",{className:"col-span-2 ml-8",children:r.jsx("p",{children:"Số tiền"})}),r.jsx("div",{className:"col-span-2",children:r.jsx("p",{children:"Thao t\xe1c"})})]}),t&&t.items.length>0?(0,r.jsxs)("div",{className:"py-2",children:[t.items.map(e=>(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center border-b border-gray-300 py-4",children:[(0,r.jsxs)("div",{className:"col-span-5 flex items-center",children:[r.jsx("div",{className:"w-40 h-40 relative",children:r.jsx(c.default,{src:e.productId.image[0],alt:e.productId.name,layout:"fill",objectFit:"cover"})}),r.jsx("div",{className:"ml-2",children:r.jsx("p",{className:"text-sm font-medium",children:x(`${e.productId.name} - ${e.productId.attribute}`,70)})})]}),r.jsx("div",{className:"col-span-2",children:(0,r.jsxs)("p",{className:"text-gray-600",children:[e.productId.price.toLocaleString()," VND"]})}),(0,r.jsxs)("div",{className:"col-span-1 flex items-center mr-8",children:[r.jsx("button",{onClick:()=>p(e),className:"bg-gray-200 text-gray-700 px-3 py-1 rounded-l focus:outline-none",children:"-"}),r.jsx("p",{className:"text-gray-600 mx-2",children:e.quantity}),r.jsx("button",{onClick:()=>m(e),className:"bg-gray-200 text-gray-700 px-3 py-1 rounded-r focus:outline-none",children:"+"})]}),r.jsx("div",{className:"col-span-2 ml-5",children:(0,r.jsxs)("p",{className:"text-gray-600",children:[(e.productId.price*e.quantity).toLocaleString()," VND"]})}),r.jsx("div",{className:"col-span-2",children:r.jsx("button",{onClick:()=>g(e),className:"bg-red-500 text-white px-3 py-1 rounded",children:"X\xf3a"})}),(0,r.jsxs)("div",{className:"col-span-12 flex flex-row items-center ml-5 w-full",children:[(0,r.jsxs)("p",{className:"text-gray-600 text-sm",children:["M\xe0u sắc: ",e.color]}),(0,r.jsxs)("p",{className:"text-gray-600 ml-2 text-sm",children:["K\xedch cỡ: ",e.size]})]})]},e._id)),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("div",{className:"my-2",children:[r.jsx("label",{className:"block",children:"M\xe3 Coupon:"}),(0,r.jsxs)("select",{className:"border border-gray-300 p-2",children:[r.jsx("option",{children:"--Chọn--"}),r.jsx("option",{children:"Sử dụng điểm (Điểm của bạn: 00)"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between my-2",children:[r.jsx("span",{children:"Tổng tiền h\xe0ng"}),(0,r.jsxs)("span",{children:[i.toLocaleString()," đ"]})]}),(0,r.jsxs)("div",{className:"flex justify-between my-2",children:[r.jsx("span",{children:"Giảm gi\xe1 sản phẩm"}),r.jsx("span",{children:"-0 đ"})]}),(0,r.jsxs)("div",{className:"flex justify-between my-2",children:[r.jsx("span",{children:"Giảm gi\xe1 coupon"}),(0,r.jsxs)("span",{children:["- ",o.toLocaleString()," đ"]})]}),(0,r.jsxs)("div",{className:"flex justify-between my-2",children:[r.jsx("span",{children:"Ph\xed vận chuyển"}),(0,r.jsxs)("span",{children:[0..toLocaleString()," đ"]})]}),(0,r.jsxs)("div",{className:"flex justify-between my-2 font-semibold",children:[r.jsx("span",{children:"TỔNG"}),(0,r.jsxs)("span",{children:[(i-o+0).toLocaleString()," đ"]})]}),(0,r.jsxs)("div",{className:"flex flex-row mt-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold",children:"TH\xd4NG TIN VẬN CHUYỂN"}),r.jsx("button",{className:"text-blue-500 underline",children:"Thay đổi th\xf4ng tin nhận h\xe0ng"}),(0,r.jsxs)("div",{className:"mt-2",children:[r.jsx("p",{children:"Người nhận: Trần Ngọc T\xfa"}),r.jsx("p",{children:"Điện thoại: "}),r.jsx("p",{children:"Địa chỉ: "})]})]}),r.jsx("button",{onClick:()=>j(),className:"bg-red-500 w-44 text-white px-4 py-2 rounded-md hover:bg-red-600 transition duration-300 ease-in-out h-10 ml-auto self-end",children:"Đặt h\xe0ng"})]})]})]}):r.jsx("div",{className:"py-4 px-36 text-center",children:r.jsx("p",{className:"text-xl font-semibold mb-64",children:"Giỏ h\xe0ng của bạn đang trống"})})]})};x.propTypes={cart:h().shape({userId:h().string,items:h().arrayOf(h().shape({_id:h().string.isRequired,productId:h().shape({_id:h().string.isRequired,name:h().string.isRequired,attribute:h().string.isRequired,image:h().arrayOf(h().string).isRequired,price:h().number.isRequired}).isRequired,color:h().string.isRequired,size:h().string.isRequired,quantity:h().number.isRequired})),totalPrice:h().number})};var u=s(143);function m(){let{user:e}=(0,l.Z)(),[t,s]=(0,n.useState)();return console.log(t),(0,r.jsxs)("div",{children:[r.jsx(i.default,{}),(0,r.jsxs)("div",{className:"px-48 pt-32",children:[r.jsx("text",{children:"Trang chủ | Giỏ h\xe0ng"}),r.jsx(x,{cart:t}),r.jsx(u.Z,{})]})]})}},639:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(7577);let i=()=>{let[e,t]=(0,r.useState)(null),[s,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/user");if(!e.ok)throw Error("Network response was not ok");let s=await e.json();t(s)}catch(e){i(e.message),console.error("Error fetching user:",e)}})()},[]),{user:e,error:s}}},143:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(326);s(7577);let i=()=>r.jsx("footer",{className:"bg-black text-white py-6 px-4 mt-20",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"HỆ THỐNG CỬA H\xc0NG"}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-base font-semibold mb-2",children:"KHU VỰC TPHCM"}),(0,r.jsxs)("ul",{className:"list-disc list-inside",children:[(0,r.jsxs)("li",{children:["414-416 Nguyễn Tr\xe3i, P.8, Q5."," ",r.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition duration-300 ease-in-out",children:"Xem bản đồ"})]}),(0,r.jsxs)("li",{children:["96 Nguyễn Tr\xe3i, P3, Q5."," ",r.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition duration-300 ease-in-out",children:"Xem bản đồ"})]}),(0,r.jsxs)("li",{children:["214 Nguyễn Tr\xe3i, P.Nguyễn Cư Trinh, Q1."," ",r.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition duration-300 ease-in-out",children:"Xem bản đồ"})]}),(0,r.jsxs)("li",{children:["126 Hậu Giang, P.6, Q6."," ",r.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition duration-300 ease-in-out",children:"Xem bản đồ"})]}),(0,r.jsxs)("li",{children:["124 Nguyễn Thị Thập, P.B\xecnh Thuận, Q7."," ",r.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition duration-300 ease-in-out",children:"Xem bản đồ"})]})]})]}),r.jsx("div",{className:"flex justify-center mt-6",children:r.jsx("div",{className:"w-full border-t border-gray-300"})}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-6",children:[r.jsx("div",{className:"text-sm text-gray-300",children:"\xa9 2024 Shop Gi\xe0y MWC. All rights reserved."}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[r.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition duration-300 ease-in-out",children:"Privacy Policy"}),r.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition duration-300 ease-in-out",children:"Terms of Service"})]})]})]})})},4133:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});var r=s(8570);let i=(0,r.createProxy)(String.raw`D:\Sneakerdaily\Client\app\cart\page.js`),{__esModule:a,$$typeof:n}=i;i.default;let l=(0,r.createProxy)(String.raw`D:\Sneakerdaily\Client\app\cart\page.js#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,615,134,621,846,909,894],()=>s(1265));module.exports=r})();